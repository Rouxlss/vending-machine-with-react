(this["webpackJsonpvending-machine"]=this["webpackJsonpvending-machine"]||[]).push([[0],{12:function(e,t,c){},14:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(7),i=c.n(a),s=(c(12),c(0)),r=c(2),j=c(5),l=function(e){var t,c=e.products,a=(e.IsPending,Object(n.useState)([])),i=Object(r.a)(a,2),l=i[0],u=i[1],d=Object(n.useState)(!1),b=Object(r.a)(d,2),m=b[0],o=b[1],O=Object(n.useState)(!1),h=Object(r.a)(O,2),f=h[0],p=h[1],v=Object(n.useState)([]),x=Object(r.a)(v,2),g=x[0],N=x[1],_=Object(n.useState)([]),S=Object(r.a)(_,2),E=S[0],I=S[1];return Object(n.useEffect)((function(){var e=Object(j.a)(l);e.map((function(t,c){t.preparation_time<=0&&(N([t]),(c=e.indexOf(t))>-1&&(e.splice(c,1),console.log("REMOVED!")))})),I(e)}),[f]),Object(n.useEffect)((function(){u(E),o(!m)}),[E]),Object(n.useEffect)((function(){return l.length>0&&(t=setInterval((function(){var e=Object(j.a)(l);e.map((function(t,c){t.preparation_time<=0?e[c].preparation_time=0:e[c].preparation_time--})),clearInterval(t),u(e),p(!f)}),1e3)),function(){clearInterval(t)}}),[m]),Object(s.jsxs)("main",{children:[Object(s.jsxs)("div",{className:"v-machine",children:[Object(s.jsxs)("div",{className:"v-machine__inside",children:[Object(s.jsx)("div",{className:"shelf",children:c.map((function(e,t){return Object(s.jsxs)("div",{className:"item",children:[Object(s.jsx)("div",{className:"img",children:Object(s.jsx)("img",{src:e.thumbnail,alt:e.name})}),Object(s.jsx)("div",{className:"name",children:t+1+"-"+e.name})]},e.id)}))}),Object(s.jsx)("div",{className:"output",children:Object(s.jsx)("div",{className:"show-item",children:g.map((function(e){return Object(s.jsx)("div",{className:"img",children:Object(s.jsx)("img",{src:e.thumbnail,alt:e.name})})}))})})]}),Object(s.jsx)("div",{className:"controls",children:Object(s.jsx)("div",{className:"queue",children:Object(s.jsx)("ul",{children:l.map((function(e){return Object(s.jsx)("li",{children:e.name},e.id)}))})})})]}),Object(s.jsxs)("div",{class:"controls-use",children:[Object(s.jsx)("div",{class:"queue",children:Object(s.jsx)("ul",{children:l.map((function(e){return Object(s.jsxs)("li",{children:[e.name," - ",Object(s.jsx)("span",{className:"time",children:e.preparation_time}),"s"]},e.id)}))})}),Object(s.jsx)("div",{class:"buttons",children:c.map((function(e,t){return Object(s.jsx)("button",{value:e,onClick:function(){return function(e){u([].concat(Object(j.a)(l),[{id:e.id+l.length,name:e.name,thumbnail:e.thumbnail,preparation_time:e.preparation_time}])),o(!m)}(e)},className:"btn",children:t+1})}))})]})]})},u=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(!0),j=Object(r.a)(i,2),u=j[0],d=j[1],b=Object(n.useState)(null),m=Object(r.a)(b,2),o=m[0],O=m[1];return Object(n.useEffect)((function(){setTimeout((function(){fetch("https://vending-machine-test.vercel.app/api/products").then((function(e){return e.json()})).then((function(e){a(e.data),d(!1),O(null)})).catch((function(e){O("Failed to fetch data"),d(!1)}))}),0)}),[]),Object(s.jsxs)(s.Fragment,{children:[o&&Object(s.jsx)("div",{className:"error",children:o}),u&&Object(s.jsx)("div",{className:"loader",children:Object(s.jsx)("img",{src:"./assets/loading.gif",alt:""})}),c&&Object(s.jsx)(l,{products:c})]})},d=function(){return Object(s.jsx)("div",{children:Object(s.jsx)(u,{})})};i.a.render(Object(s.jsx)(d,{}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.a4675a6b.chunk.js.map