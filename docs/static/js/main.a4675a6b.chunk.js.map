{"version":3,"sources":["components/ProductList.js","components/Products.js","components/App.js","index.js"],"names":["ProductList","myTimer","products","IsPending","useState","itemList","setitemList","additem","setadditem","interval","setinterval","completed","setcompleted","uncompleted","setuncompleted","useEffect","newItemList","map","item","index","preparation_time","indexOf","splice","console","log","length","setInterval","clearInterval","className","product","src","thumbnail","alt","name","id","class","value","onClick","handleAddProduct","Products","setProducts","setIsPending","IsError","setIsError","setTimeout","fetch","then","res","json","data","catch","err","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a4675a6b.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\r\n\r\nexport const ProductList = ({ products, IsPending=null }) => {\r\n\r\n    const [itemList, setitemList] = useState([]);\r\n    const [additem, setadditem] = useState(false);\r\n    const [interval, setinterval] = useState(false)\r\n\r\n    const [completed, setcompleted] = useState([]);\r\n    const [uncompleted, setuncompleted] = useState([]);\r\n\r\n\r\n    let myTimer;\r\n\r\n    const handleAddProduct = (product) => {\r\n\r\n        setitemList([...itemList, {\r\n            id: product.id + itemList.length,\r\n            name: product.name,\r\n            thumbnail: product.thumbnail,\r\n            preparation_time: product.preparation_time\r\n        }]);\r\n\r\n        setadditem(!additem);\r\n    }\r\n\r\n    const timer = () => {\r\n\r\n        if (itemList.length > 0) {\r\n\r\n            myTimer = setInterval(() => {\r\n\r\n                let newItemList = [...itemList];\r\n                newItemList.map((item, index) => {\r\n                    if (item.preparation_time <= 0) {\r\n                        newItemList[index].preparation_time = 0;\r\n                    } else {\r\n                        newItemList[index].preparation_time--\r\n                    }\r\n                });\r\n\r\n                clearInterval(myTimer);\r\n                setitemList(newItemList);\r\n                setinterval(!interval);\r\n\r\n            }, 1000);\r\n\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        let newItemList = [...itemList];\r\n\r\n        newItemList.map((item, index) => {\r\n            if (item.preparation_time <= 0) {\r\n                setcompleted([item])\r\n                var index = newItemList.indexOf(item);\r\n                if (index > -1) {\r\n                    newItemList.splice(index, 1);\r\n                    console.log('REMOVED!')\r\n                }\r\n            }\r\n        });\r\n\r\n        setuncompleted(newItemList)\r\n\r\n    }, [interval])\r\n\r\n    useEffect(() => {\r\n        setitemList(uncompleted);\r\n        setadditem(!additem);\r\n\r\n    }, [uncompleted])\r\n\r\n    useEffect(() => {\r\n        timer();\r\n        return () => {\r\n            clearInterval(myTimer);\r\n        }\r\n    }, [additem])\r\n\r\n    return (\r\n        <main>\r\n\r\n            <div className=\"v-machine\">\r\n                <div className=\"v-machine__inside\">\r\n                    <div className=\"shelf\">\r\n                        {\r\n                            products.map((product, index) => (\r\n                                <div key={product.id} className=\"item\">\r\n                                    <div className=\"img\">\r\n                                        <img\r\n                                            src={product.thumbnail} alt={product.name} />\r\n                                    </div>\r\n                                    <div className=\"name\">\r\n                                        {index + 1 + \"-\" + product.name}\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        }\r\n                    </div>\r\n                    <div className=\"output\">\r\n                        <div className=\"show-item\">\r\n                            {\r\n                                completed.map((product) => (\r\n                                    <div className=\"img\">\r\n                                        <img src={product.thumbnail} alt={product.name} />\r\n                                    </div>\r\n                                ))\r\n                            }\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"controls\">\r\n                    <div className=\"queue\">\r\n                        <ul>\r\n                            {\r\n                                itemList.map((item) => (\r\n                                    <li key={item.id}>{item.name}</li>\r\n                                ))\r\n                            }\r\n\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"controls-use\">\r\n                <div class=\"queue\">\r\n                    <ul>\r\n                        {\r\n                            itemList.map((item) => (\r\n                                <li key={item.id}>{item.name} - <span className=\"time\">{item.preparation_time}</span>s</li>\r\n                            ))\r\n                        }\r\n                    </ul>\r\n                </div>\r\n                <div class=\"buttons\">\r\n                    {\r\n                        products.map((product, index) => (\r\n                            <button value={product} onClick={() => handleAddProduct(product)} className=\"btn\">{index + 1}</button>\r\n                        ))\r\n                    }\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </main>\r\n\r\n       \r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { ProductList } from './ProductList'\r\n\r\nexport const Products = () => {\r\n\r\n    const [products, setProducts] = useState(null);\r\n    const [IsPending, setIsPending] = useState(true)\r\n    const [IsError, setIsError] = useState(null)\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            fetch('https://vending-machine-test.vercel.app/api/products')\r\n            .then(res => {\r\n                return res.json()\r\n            })\r\n            .then((data)=>{\r\n                setProducts(data.data)\r\n                setIsPending(false);\r\n                setIsError(null);\r\n            })\r\n            .catch(err => {\r\n                setIsError(\"Failed to fetch data\");\r\n                setIsPending(false);\r\n            })\r\n        }, 0);\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <>\r\n            {IsError && <div className=\"error\">{IsError}</div> }\r\n            {IsPending && <div className=\"loader\"><img src=\"./assets/loading.gif\" alt=\"\" /></div>}\r\n            {products && <ProductList products={products}/>}\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\nimport { Nav } from './Nav'\nimport { Products } from './Products'\n\nexport const App = () => {\n  return (\n    <div>\n      <Products/>\n    </div>\n  )\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {App} from './components/App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}